!function(){function a(){var a=jQuery('input[type="date"], input[type="datetime"], input[type="time"]');a.wrap('<div class="input-group"></div>'),a.each(function(a,b){b=jQuery(b);var c;switch(b.attr("type")){case"date":b.data("type","date"),c='<button class="btn btn-default" type="button"><span class="glyphicon glyphicon-calendar"></span></button>';break;case"time":b.data("type","time"),c='<button class="btn btn-default" type="button"><span class="glyphicon glyphicon-time"></span></button>';break;default:b.data("type","datetime"),c='<button class="btn btn-default" type="button"><span class="glyphicon glyphicon-calendar"></span></button>'}b.after(jQuery('<div class="input-group-btn">'+c+"</div>")),b.parent().find("button").click(o)}),a.attr("type","text")}function b(a){z.find('[data-id="time-btn"]').removeClass("active"),z.find('[data-id="date-btn"]').addClass("active"),z.find('[data-id="time-content"], [data-id="now-btn"]').hide(),z.find('.popover-title, [data-id="date-content"], [data-id="today-btn"]').show(),y=a.month(),D=a.year();var b=moment(a).startOf("month"),c=moment(a).endOf("month");C.text(moment.months()[y]+" "+D);var d,e=0,g="<tr>";for(d=0;d<b.day();d++)g+="<td></td>",e++;for(d=0;d<c.date();d++)7==e&&(g+="</tr><tr>",e=0),active=y===w.month()&&D===w.year()&&d+1===w.date()?"btn btn-xs btn-default active":"",g+='<td><a class="'+active+'" href="#">'+(d+1)+"</a></td>",e++;for(d=c.day();6>d;d++)g+="<td></td>",e++;g+="</tr>",B.html(jQuery(g)),B.find("a").click(f)}function c(){z=jQuery('<div class="popover bottom datetime-popover"><div class="arrow"></div><div class="popover-title text-center"><a data-id="previous-btn" class="btn btn-xs btn-default" href="#"><span class="glyphicon glyphicon-chevron-left"></span></a><h3 class="panel-title"></h3><a data-id="next-btn" class="btn btn-xs btn-default" href="#"><span class="glyphicon glyphicon-chevron-right"></span></a></div><div data-id="date-content" class="popover-content"><table class="table table-condensed table-striped"><thead><tr></tr></thead><tbody></tbody></table></div><div data-id="time-content" class="popover-content"><div class="col-md-4 text-center"><button class="btn btn-default" data-id="hour-up-btn"><span class="glyphicon glyphicon-chevron-up"></span></button><input class="form-control" data-id="hour-input"><button class="btn btn-default" data-id="hour-down-btn"><span class="glyphicon glyphicon-chevron-down"></span></button></div><div class="col-md-4 text-center"><button class="btn btn-default" data-id="minute-up-btn"><span class="glyphicon glyphicon-chevron-up"></span></button><input class="form-control" data-id="minute-input"><button class="btn btn-default" data-id="minute-down-btn"><span class="glyphicon glyphicon-chevron-down"></span></button></div><div class="col-md-4 text-center"><button class="btn btn-default" data-id="second-up-btn"><span class="glyphicon glyphicon-chevron-up"></span></button><input class="form-control" data-id="second-input"><button class="btn btn-default" data-id="second-down-btn"><span class="glyphicon glyphicon-chevron-down"></span></button></div><button class="btn btn-default btn-xs pull-right" data-id="done-btn">'+H+'</button><div class="clearfix"></div></div><div class="panel-footer"><a data-id="today-btn" class="btn btn-xs btn-default" href="#">'+J+'</a><a data-id="now-btn" class="btn btn-xs btn-default" href="#">'+I+'</a><div data-id="datetime-btns" class="btn-group btn-group-xs pull-right"><a data-id="date-btn" class="btn btn-default active" href="#"><span class="glyphicon glyphicon-calendar"></span></a><a data-id="time-btn" class="btn btn-default" href="#"><span class="glyphicon glyphicon-time"></span></a></div><div class="clearfix"></div></div></div>'),z.find('[data-id="previous-btn"]').click(q),z.find('[data-id="next-btn"]').click(j),z.find('[data-id="today-btn"]').click(t),z.find('[data-id="done-btn"]').click(g),z.find('[data-id="hour-up-btn"], [data-id="minute-up-btn"], [data-id="second-up-btn"]').click(n),z.find('[data-id="hour-input"], [data-id="minute-input"], [data-id="second-input"]').change(l),z.find('[data-id="hour-down-btn"], [data-id="minute-down-btn"], [data-id="second-down-btn"]').click(m),z.find('[data-id="now-btn"]').click(k),z.find('[data-id="date-btn"]').click(e),z.find('[data-id="time-btn"]').click(s);var a=z.find(".popover-content > table > thead > tr");for(var b in moment.weekdaysShort())a.append(jQuery("<th>"+moment.weekdaysShort()[b]+"</th>"));C=z.find(".panel-title"),B=z.find(".popover-content > table > tbody")}function d(){z.find('[data-id="date-btn"]').removeClass("active"),z.find('[data-id="time-btn"]').addClass("active"),z.find('.popover-title, [data-id="date-content"], [data-id="today-btn"]').hide(),z.find('[data-id="time-content"], [data-id="now-btn"]').show(),w||(w=moment(x.val())),w.isValid()||(w=moment()),jQuery('[data-id="hour-input"]').val(w.hour()),jQuery('[data-id="minute-input"]').val(w.minute()),jQuery('[data-id="second-input"]').val(w.second())}function e(a){a.preventDefault();var c=jQuery(this);c.hasClass("active")||(b(w),c.siblings(".active").removeClass("active"),c.addClass("active"))}function f(a){a.preventDefault();var b=parseInt(jQuery(this).text()),c=moment(D+"-"+(y+1).toString().lpad("0",2)+"-"+b.toString().lpad("0",2));u(c)}function g(a){a.preventDefault();var b=moment();b.hour(jQuery('[data-id="hour-input"]').val()),b.minute(jQuery('[data-id="minute-input"]').val()),b.second(jQuery('[data-id="second-input"]').val()),v(b)}function h(){z.find('[data-id="datetime-btns"]').hide()}function i(){z.hide(),A=null,w=null}function j(a){a.preventDefault();var c=y+2,d=D;12===y&&(d++,c=0);var e=moment(d.toString().lpad("0",4)+"-"+c.toString().lpad("0",2)+"-01");b(e)}function k(a){a.preventDefault();var b=moment();v(b)}function l(){var a=jQuery(this);a.val(a.val().match(/\d*\.?\d+/))}function m(a){a.preventDefault();var b=jQuery(this),c=null,d=60;switch(b.data("id")){case"hour-down-btn":c=jQuery('[data-id="hour-input"]'),d=24;break;case"minute-down-btn":c=jQuery('[data-id="minute-input"]');break;default:c=jQuery('[data-id="second-input"]')}var e=parseInt(c.val());c.val(isNaN(e)||0===e?d:--e)}function n(a){a.preventDefault();var b=jQuery(this),c=null,d=60;switch(b.data("id")){case"hour-up-btn":c=jQuery('[data-id="hour-input"]'),d=24;break;case"minute-up-btn":c=jQuery('[data-id="minute-input"]');break;default:c=jQuery('[data-id="second-input"]')}var e=parseInt(c.val());c.val(isNaN(e)||e===d?0:++e)}function o(){var a=jQuery(this);if(x=a.parent().prev(),A&&this===A)return void i();A=this,x.parent().after(z);var b=moment(x.val());b.isValid()||(b=moment()),w=b,p(b),z.show()}function p(a){switch(x.data("type")){case"date":h(),b(a);break;case"time":h(),d(a);break;default:r(),b(a)}}function q(a){a.preventDefault();var c=y,d=D;-1==y&&(d--,c=11);var e=moment(d.toString().lpad("0",4)+"-"+c.toString().lpad("0",2)+"-01");b(e)}function r(){z.find('[data-id="datetime-btns"]').show()}function s(a){a.preventDefault();var b=jQuery(this);b.hasClass("active")||(d(w),b.siblings(".active").removeClass("active"),b.addClass("active"))}function t(a){a.preventDefault();var b=moment();u(b)}function u(a){var b=moment(x.val());switch(b.isValid()?(a.hour(b.hour()),a.minute(b.minute()),a.second(b.second())):(a.hour(0),a.minute(0),a.second(0)),w=a,x.data("type")){case"date":x.val(a.format(E));break;case"time":x.val(a.format(G));break;default:x.val(a.format(F))}B.find(".active").removeClass("active"),B.find('a:textEquals("'+a.date()+'")').addClass("active"),"date"===x.data("type")?i():d(w)}function v(a){switch(w||(w=moment(x.val())),w.isValid()&&(w.hour(a.hour()),w.minute(a.minute()),w.second(a.second()),a=w),x.data("type")){case"time":x.val(a.format(G));break;default:x.val(a.format(F))}i()}var w,x,y,z,A,B,C,D,E="YYYY-MM-DD",F="YYYY-MM-DD HH:mm:ss",G="HH:mm:ss";jQuery.expr[":"].textEquals=function(a,b,c){return jQuery(a).text().match("^"+c[3]+"$")},String.prototype.lpad=function(a,b){for(var c=this;c.length<b;)c=a+c;return c};var H="Done",I="Now",J="Today";c(),jQuery(function(){jQuery("body").append(z),a()})}();