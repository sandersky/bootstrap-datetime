!function(){function a(){var a=jQuery('input[type="date"], input[type="datetime"], input[type="time"]');a.wrap('<div class="input-group"></div>'),a.each(function(a,b){b=jQuery(b);var c;switch(b.attr("type")){case"date":b.data("type","date"),c='<button class="btn btn-default" type="button"><span class="glyphicon glyphicon-calendar"></span></button>';break;case"time":b.data("type","time"),c='<button class="btn btn-default" type="button"><span class="glyphicon glyphicon-time"></span></button>';break;default:b.data("type","datetime"),c='<button class="btn btn-default" type="button"><span class="glyphicon glyphicon-calendar"></span></button>'}b.after(jQuery('<div class="input-group-btn">'+c+"</div>")),b.parent().find("button").click(j)}),a.attr("type","text")}function b(a){t.find('[data-id="time-btn"]').removeClass("active"),t.find('[data-id="date-btn"]').addClass("active"),t.find('[data-id="time-content"]').hide(),t.find('[data-id="date-content"]').show(),s=a.month(),x=a.year();var b=moment(a).startOf("month"),c=moment(a).endOf("month");w.text(moment.months()[s]+" "+x);var d,e=0,g="<tr>";for(d=0;d<b.day();d++)g+="<td></td>",e++;for(d=0;d<c.date();d++)7==e&&(g+="</tr><tr>",e=0),active=s===q.month()&&x===q.year()&&d+1===q.date()?" active":"",g+='<td><a class="btn btn-xs btn-default'+active+'" href="#">'+(d+1)+"</a></td>",e++;for(d=c.day();6>d;d++)g+="<td></td>",e++;g+="</tr>",v.html(jQuery(g)),v.find("a").click(f)}function c(){t=jQuery('<div class="popover bottom datetime-popover"><div class="arrow"></div><div class="popover-title text-center"><a data-id="previous-btn" class="btn btn-xs btn-default" href="#"><span class="glyphicon glyphicon-chevron-left"></span></a><h3 class="panel-title"></h3><a data-id="next-btn" class="btn btn-xs btn-default" href="#"><span class="glyphicon glyphicon-chevron-right"></span></a></div><div data-id="date-content" class="popover-content"><table class="table table-condensed table-striped"><thead><tr></tr></thead><tbody></tbody></table></div><div data-id="time-content" class="popover-content"></div><div class="panel-footer"><a data-id="today-btn" class="btn btn-xs btn-default" href="#">'+B+'</a><div data-id="datetime-btns" class="btn-group btn-group-xs pull-right"><a data-id="date-btn" class="btn btn-default active" href="#"><span class="glyphicon glyphicon-calendar"></span></a><a data-id="time-btn" class="btn btn-default" href="#"><span class="glyphicon glyphicon-time"></span></a></div></div></div>'),t.find('[data-id="previous-btn"]').click(l),t.find('[data-id="next-btn"]').click(i),t.find('[data-id="today-btn"]').click(o),t.find('[data-id="date-btn"]').click(e),t.find('[data-id="time-btn"]').click(n);var a=t.find(".popover-content > table > thead > tr");for(var b in moment.weekdaysShort())a.append(jQuery("<th>"+moment.weekdaysShort()[b]+"</th>"));w=t.find(".panel-title"),v=t.find(".popover-content > table > tbody")}function d(){t.find('[data-id="date-btn"]').removeClass("active"),t.find('[data-id="time-btn"]').addClass("active"),t.find('[data-id="date-content"]').hide(),t.find('[data-id="time-content"]').show()}function e(a){a.preventDefault();var c=jQuery(this);c.hasClass("active")||(b(q),c.siblings(".active").removeClass("active"),c.addClass("active"))}function f(a){a.preventDefault();var b=parseInt(jQuery(this).text()),c=moment(x+"-"+(s+1).toString().lpad("0",2)+"-"+b.toString().lpad("0",2));p(c)}function g(){t.find('[data-id="datetime-btns"]').hide()}function h(){t.hide(),u=null}function i(a){a.preventDefault();var c=s+2,d=x;12===s&&(d++,c=0);var e=moment(d.toString().lpad("0",4)+"-"+c.toString().lpad("0",2)+"-01");b(e)}function j(){if(r=jQuery(this).parent().prev(),u&&this===u)return void h();u=this,r.before(t);var a=moment(r.val());a.isValid()||(a=moment()),q=a,k(a),t.show()}function k(a){switch(r.data("type")){case"date":g(),b(a);break;case"time":g(),d(a);break;default:m(),b(a)}}function l(a){a.preventDefault();var c=s,d=x;-1==s&&(d--,c=11);var e=moment(d.toString().lpad("0",4)+"-"+c.toString().lpad("0",2)+"-01");b(e)}function m(){t.find('[data-id="datetime-btns"]').show()}function n(a){a.preventDefault();var b=jQuery(this);b.hasClass("active")||(d(q),b.siblings(".active").removeClass("active"),b.addClass("active"))}function o(a){a.preventDefault();var b=moment();p(b)}function p(a){var b=moment(r.val());switch(b.isValid()?(a.hour(b.hour()),a.minute(b.minute()),a.second(b.second())):(a.hour(0),a.minute(0),a.second(0)),q=a,r.data("type")){case"date":r.val(a.format(y));break;case"time":r.val(a.format(A));break;default:r.val(a.format(z))}v.find(".active").removeClass("active"),v.find('a:textEquals("'+a.date()+'")').addClass("active"),h()}var q,r,s,t,u,v,w,x,y="YYYY-MM-DD",z="YYYY-MM-DD HH:mm:ss",A="HH:mm:ss";jQuery.expr[":"].textEquals=function(a,b,c){return jQuery(a).text().match("^"+c[3]+"$")},String.prototype.lpad=function(a,b){for(var c=this;c.length<b;)c=a+c;return c};var B="Today";c(),jQuery(function(){jQuery("body").append(t),a()})}();